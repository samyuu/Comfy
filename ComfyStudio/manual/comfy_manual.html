<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="author" content="Samyuu">
    <meta name="description" content="User manual for the Comfy Studio chart editor program.">
    <title>Comfy Studio User Manual</title>
    <link rel="shortcut icon" href="image/comfy_icon.ico" type="image/x-icon">
    <link rel="stylesheet" href="comfy_style.css" type="text/css">
</head>

<!-- NOTE: HTML formatting style guidelines

    "Menu Option" for single menu items
    "Menu" for nested menu containers

    Menus and widgets are "clicked"
    Input device buttons are "pressed"
    Shortcuts modifiers are defined *without* spaces

    HTML class names are PascalCase
    HTML IDs may be visible in the URL therefore kebab-case :PogTasty:
-->

<body>

    <div class="MainContent">

        <header class="MainHeader">
            <div>
                <img class="MainHeaderIcon" src="image/comfy_icon.ico">
                <h1>Comfy Studio Chart Editor (Beta)</h1>
                <!-- TODO: Keep this updated :Sadge: -->
                <h4>User Manual - <time>(2021/04/22)</time></h4>
            </div>
            <div>
                <img class="MainHeaderImage" src="image/other/editor_example_chart.png">
            </div>
        </header>

        <nav class="MainIndex">
            <h2>Getting Started</h2>
            <ul>
                <li>
                    <a href="#open-save-chart">Opening and Saving Charts</a>
                </li>
                <li>
                    <a href="#loading-song">Loading a Song</a>
                </li>
                <li>
                    <a href="#setting-metadata">Setting Metadata</a>
                </li>
                <li>
                    <a href="#setting-rhythm">Sync and Tempo</a>
                </li>
                <li>
                    <a href="#placing-targets">Placing Targets</a>
                </li>
                <li>
                    <a href="#positioning-targets">Positioning Targets</a>
                </li>
                <li>
                    <a href="#playtesting-chart">Playtesting</a>
                </li>
                <li>
                    <a href="#export-chart">Exporting Charts</a>
                </li>
                <li>
                    <a href="#settings-window">Settings Window</a>
                </li>

                <!-- TODO: Include section -->
                <!-- <li>
                    <a href="#terminology-concepts">Terminology and Concepts</a>
                </li> -->

                <!-- TODO: Include section -->
                <!-- <li>
                    <a href="#chart-style-guide">Charting Style Guide</a>
                </li> -->
            </ul>
        </nav>
        <hr>
        <section class="SubSection" id="open-save-chart">
            <header class="SectionHeader">
                <h3>Opening and Saving Charts</h3>
            </header>
            <div class="TextBlock">
                <p>
                    Comfy Studio uses the <code>.csfm</code> file format for storing chart data.
                    Charts can be opened by clicking the <code>File > Open...</code> menu option or pressing
                    <code>Ctrl+O</code> to open a file dialog.
                    Alternatively chart files can also be opened by being drag and dropped onto the Comfy Studio window
                    or launched via windows file association.
                </p>
                <figure class="NoteFigure">
                    <p>
                        <strong>Note:</strong> The <code>.csfm</code> file format has to be linked manually to the
                        <code>ComfyStudio.exe</code> executable by the user to allow <em>Open With</em> functionality
                        through the
                        file explorer.
                    </p>
                </figure>

                <p>
                    Charts can be saved by clicking the <code>File > Save</code> menu option or pressing
                    <code>Ctrl+S</code>.
                    To save a chart to a new location click the <code>File > Save As...</code> menu option or
                    press <code>Ctrl+Shift+S</code> to open a save file dialog.
                    If the <em>Song File Name</em> is specified as an <em>absolute</em> path
                    and the <code>Copy Song to Directory</code> checkbox under the dialog options is checked
                    then the associated audio file will be copied to the directory of the new <code>.csfm</code>
                    chart file and the <em>Song File Name</em> path will be updated to be <em>relative</em>.
                </p>
            </div>

            <div class="ImageBlock">
                <img src="image/other/menu_option_file.png">
            </div>

            <div class="TextBlock">
                <p>
                    In addition to the <code>.csfm</code> chart format used for native storage,
                    Comfy Studio also supports <em>importing</em> and <em>exporting</em> charts
                    <em>to</em> and <em>from</em> the older <code>.pje</code> format used by UPDC (near lossless)
                    as well as Future Tone style <code>.dsc</code> PV Script charts (lossy),
                    available through the <code>File > Import</code> and <code>File > Export</code> sub menus.
                </p>

                <figure class="NoteFigure">
                    <p>
                        <strong>Note:</strong> Charts stored using the <code>.dsc</code> PV Script file format
                        while sufficient for gameplay, do not encode any real song Tempo information
                        and are therefore <strong>not suitable for being edited</strong> in post.
                        <br>
                        The ability to import existing <code>.dsc</code> files is primarily intended for playtesting and
                        studying placement patterns of official charts.

                        The timing of Targets visible on the timeline as well as all Tempo Changes
                        are only a rough approximation and are not accurate to, nor representative of
                        the original chart.

                        <strong>Re-exporting</strong> a <code>.dsc</code> chart
                        that has originally been imported as a such is <strong>strongly discouraged</strong>.
                    </p>
                </figure>
            </div>

        </section>
        <hr>
        <section class="SubSection" id="loading-song">
            <header class="SectionHeader">
                <h3>Loading a Song</h3>
            </header>

            <div class="TextBlock">
                <p>
                    The first step in creating a chart is selecting an audio file
                    which can be done through the <em>Chart Properties</em> window.
                    <br>
                    Either manually enter a file path into the <code>Song File Name</code> input text field, click the
                    <code>...</code> button
                    to open a file dialog
                    or drag and drop an audio file on top of the Comfy Studio window.
                    <br>
                    Upon initial load of the audio, the chart song <code>Title</code> and <code>Duration</code>
                    properties will also be set automatically to that of the audio file.
                </p>

                <figure class="NoteFigure">
                    <p>
                        <strong>Note:</strong> All file paths may be specified as either an absolute
                        or relative path to the <code>.csfm</code> chart file location.
                    </p>
                </figure>
            </div>

            <div class="ImageBlock">
                <img src="image/other/chart_properties_song_file_name.png">
            </div>

            <div class="TextBlock">
                <p>The currently supported audio file formats are:</p>
                <ul>
                    <li>Free Lossless Audio Codec (*.flac)</li>
                    <li>Ogg Vorbis (*.ogg)</li>
                    <li>MPEG Audio Layer III (*.mp3)</li>
                    <li>Waveform Audio File Format (*.wav)</li>
                </ul>
            </div>
            <div class="ImageBlock">
                <img src="image/other/file_dialog_audio_file_types.png">
            </div>

            <div class="TextBlock">
                <p>
                    Once the audio file has been successfully loaded an audio waveform will appear in the
                    <em>Target Timeline</em> window.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/timeline/waveform_example.png">
            </div>
        </section>
        <hr>
        <section class="SubSection" id="setting-metadata">
            <header class="SectionHeader">
                <h3>Setting Metadata</h3>
            </header>
            <div class="TextBlock">
                <p>
                    In addition to selecting an audio file, the <em>Chart Properties</em> window can also used for
                    setting additional chart related properties:
                </p>
            </div>
            <div>
                <div class="FloatContainerLeft">
                    <div class="TextBlock">
                        <ul>
                            <li>Song Title</li>
                            <p>
                                The text displayed inside the top part of the gameplay HUD. Defaults to "ダミー" if
                                unspecified.
                            </p>
                            <hr>
                            <li>Song Artist</li>
                            <li>Song Album</li>
                            <li>Song Lyricist</li>
                            <li>Song Arranger</li>
                            <li>Extra Info 1 - 4</li>
                            <p>
                                General info about the chosen song and are usually displayed during or prior to the
                                loading screen.
                                <br>
                                <em>Extra Info</em> are user-defined custom properties with identical functionality.
                            </p>
                            <hr>
                            <li>Chart Creator Name</li>
                            <li>Chart Creator Comment</li>
                            <p>
                                Used for identifying yourself or commenting on something
                                for anyone with access to the chart file.
                            </p>
                            <hr>
                            <li>Cover Image</li>
                            <li>Logo Image</li>
                            <li>Background Image</li>
                            <p>
                                Paths to the images displayed in the practice mode background and during
                                the in-game song select menu.
                                These widgets function identically to the <code>Song File Name</code> path widget.
                                <!-- <br> -->
                                Conventionally the image dimensions are <code>500x500 (1:1)</code> for covers,
                                <code>860x300 (43:15)</code> for logos and <code>1280x720 (16:9)</code> for backgrounds.
                                At the moment, images of different sizes will be <em>stretched to fit</em>.
                                <br>
                                <br>
                                Image files dropped onto the Comfy Studio window will automatically be
                                assigned if their file name case-insensitively contains
                                at least one of the following keywords:
                                <br>
                                <strong>Cover</strong>: <code>cover</code>, <code>jacket</code>, <code>song_jk</code>,
                                <code>folder</code>, <code>album</code>
                                <br>
                                <strong>Logo</strong>: <code>logo</code>, <code>song_logo</code>
                                <br>
                                <strong>Background</strong>: <code>background</code>, <code>song_bg</code>,
                                <code>haikei</code>
                            </p>
                            <hr>
                            <li>Song Preview</li>
                            <p>
                                The section of the song played while scrolling through the song during the
                                in-game song select menu.
                            </p>
                            <hr>
                            <li>Difficulty Type</li>
                            <li>Difficulty Level</li>
                            <p>
                                The difficulty rating displayed in the gameplay HUD and used for sorting
                                during the in-game song select menu.
                            </p>
                            <hr>
                            <li>Button Sound</li>
                            <li>Slide Sound</li>
                            <li>Chain Slide Sound</li>
                            <li>Slider Touch</li>
                            <p>
                                The default button sounds associated with the chart and the sounds used inside the
                                editor as well as during playtesting.
                            </p>

                            <figure class="NoteFigure">
                                <p>
                                    <strong>Note:</strong> <em>Right Click</em> a combo box item to preview its sound.
                                </p>
                            </figure>
                        </ul>
                    </div>
                </div>

                <div class="FloatContainerRight">
                    <div class="ImageBlock">
                        <img src="image/other/chart_properties_expanded.png">
                    </div>
                </div>
            </div>

        </section>

        <div class="FloatClear"></div>
        <hr>
        <section class="SubSection" id="setting-rhythm">
            <header class="SectionHeader">
                <h3>Sync and Tempo</h3>
            </header>
            <div class="TextBlock">
                <p>
                    Choosing the right tempo and song offset is essential for any chart.
                    The <em>Sync Window</em> is the main method of setting a song's tempo, start offset and duration.
                </p>
                <p>
                    The <code>Start Offset</code> widget is used for setting the offset of the song audio file relative
                    to the
                    start of the chart.
                    A <em>negative</em> offset results in the song starting <em>later</em>, a <em>positive</em> offset
                    <em>earlier</em>. The Target Timeline waveform can be a very useful tool in finding a suitable
                    offset.
                    <br>
                    The <code>Move by Beat</code> buttons add or subtract a fraction of the duration of a beat at the
                    initial tempo to the Start Offset.
                    This is especially useful when for example delaying the start offset of a song up to the second
                    <span class="TimeSigSpan"><sup class="TimeSigSup"><b>4</b></sup><br><sup
                            class="TimeSigSup"><b>4</b></sub></span>
                    bar as is recommended.
                    <br>
                    The <code>Duration</code> widget is used for entering the duration of the chart. Upon initially
                    loading an audio file the duration is automatically set to its duration.
                    The <code>Set</code> button can be used to set the Duration to that of the current Target Timeline
                    Cursor position.
                </p>
                <p>
                    The <code>Tempo</code> and <code>Time Signature</code> widgets
                    operate on the current Target Timeline cursor position.
                    If the cursor does not sit on an existing Tempo Change, a new one is inserted automatically.
                    <br>
                    Pressing the <code>Remove</code> button removes the tempo change at the cursor position, the very
                    first tempo change however can not be removed.
                    <br>
                    Allowed tempos range from <code>30.00 BPM</code> to <code>960.00 BPM</code>
                    and both the numerator and denominator of the time signature may range from <code>1</code> to
                    <code>64</code>.
                </p>

                <figure class="NoteFigure">
                    <p>
                        <strong>Note:</strong> Vastly irregular (and in practice rarely ever used) time signatures which
                        when <em>192</em> is divided by their <em>denominator</em> unevenly (for example
                        <span class="TimeSigSpan"><sup class="TimeSigSup"><b>4</b></sup><br><sup
                                class="TimeSigSup"><b>7</b></sub></span>
                        because 192÷7 ≈ 27.4285...) will result in integer precision
                        inaccuracies and are therefore <em>not officially supported</em>.
                    </p>
                </figure>
            </div>
            <div class="ImageBlock">
                <img src="image/other/sync_window_example.png">
            </div>

            <div class="TextBlock">
                <p>
                    Alternatively <code>Right Mouse</code> click on an existing Tempo Change in the Target Timeline to
                    open an edit popup with similar functionality to the Sync Window Chart Rhythm widgets.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/timeline/tempo_change_popup.png">
            </div>

            <div class="TextBlock">
                <p>
                    One way of determining a song's tempo is through the <em>BPM Calculator</em> window.
                    Tap along with every perceived beat as you listen to your song to calculate its tempo.
                    <br>
                    To enter a tap either click the <code>Tap</code> button or press <code>Space</code> while the window
                    is focused.
                    To reset the measurement click the <code>Reset</code> button or press <code>Esc</code>.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/other/bpm_calculator_window_example.png">
            </div>
        </section>
        <hr>
        <section class="SubSection" id="placing-targets">
            <header class="SectionHeader">
                <h3>Placing Targets</h3>
            </header>
            <div class="TextBlock">
                <p>
                    Placing targets in-sync to the music is done through the
                    <em>Target Timeline</em> window.
                </p>
                <p>
                    <code>Left Mouse</code> click while hovering the timeline area to position your
                    timeline cursor underneath your mouse cursor.
                    <br>
                    Hold down <code>Left Mouse</code> inside the upper part of the timeline to begin cursor scrubbing.
                    <br>
                    Pressing <code>Esc</code> will center the cursor.
                    Pressing the <code>Left</code> and <code>Right</code> keys will move the cursor by a single grid
                    step in the corresponding direction and holding down <code>Shift</code> while doing so
                    increases the cursor step distance.
                    <br>
                    The current cursor time is displayed in the bottom left of the timeline
                    and can be clicked to enter and or copy / paste a time point to which to move to.
                </p>
            </div>
            <div class="ImageBlock">
                <video src="image/timeline/mouse_click_demo.webm" autoplay muted loop></video>
            </div>

            <div class="TextBlock">
                <p>
                    The timeline can be scrolled left and right by using the <code>Mouse Wheel</code>.
                    Holding down <code>Shift</code> increases the scroll speed.
                    Holding down <code>Middle Mouse</code> allows scroll gripping of the timeline.
                    The timeline scrollbar can also be used to quickly navigate the entire timeline.
                </p>
            </div>
            <div class="ImageBlock">
                <video src="image/timeline/mouse_scroll_demo.webm" autoplay muted loop></video>
            </div>

            <div class="TextBlock">
                <p>
                    The timeline can be zoomed in and out by holding down <code>Alt</code> while
                    <code>Mouse Wheel</code> scrolling up and down.
                    The timeline zoom slider can also be used for controlling the zoom level. Holding down
                    <code>Ctrl</code> before clicking on a slider widget turns it into an input text field.
                </p>
            </div>
            <div class="ImageBlock">
                <video src="image/timeline/mouse_zoom_demo.webm" autoplay muted loop></video>
            </div>

            <div class="TextBlock">
                <p>
                    Click the <code>Toggle Playback</code> button on the top left
                    or press <code>Space</code> to toggle playback.
                    Click the <code>Stop Playback</code> button or press <code>Esc</code> during playback to not only
                    pause
                    playback
                    but also reset the cursor to the last time point prior to playback (indicated by the white marker
                    line).
                    <code>Mouse Wheel</code> scrolling during playback not only scrolls the timeline, but also seeks
                    through the chart.
                </p>

                <p>
                    The <em>grid division</em> defines the number of sub divisions in a <span class="TimeSigSpan"><sup
                            class="TimeSigSup"><b>4</b></sup><br><sup class="TimeSigSup"><b>4</b></sub>
                    </span> bar that the cursor snaps to.
                    <!-- <br> -->
                    The available division level ranges from 1/4th (1 beat) up to 1/192nd,
                    however divisions more precise than 1/32nd should almost never be used and are often an
                    indication for an inaccurately set tempo or song offset.
                    <br>
                    The current grid division is displayed in the bottom left of the timeline
                    next to the cursor time / playback speed display
                    and can be changed by <code>Left Mouse</code> / <code>Right Mouse</code> clicking the division
                    widget,
                    pressing <code>Up</code> / <code>Down</code>, clicking <code>Mouse X1</code> / <code>Mouse X2</code>
                    or by using one of the <code>Grid Division</code> context menu options.
                </p>

                <p>
                    Once moved appropriately Targets can be inserted at the current cursor position by
                    pressing:
                <ul>
                    <li><code>W</code> or <code>I</code> for <strong>Triangle</strong></li>
                    <li><code>A</code> or <code>J</code> for <strong>Square</strong></li>
                    <li><code>S</code> or <code>K</code> for <strong>Cross</strong></li>
                    <li><code>D</code> or <code>L</code> for <strong>Circle</strong></li>
                    <li><code>Q</code> or <code>U</code> for <strong>Slide Left</strong></li>
                    <li><code>E</code> or <code>O</code> for <strong>Slide Right</strong></li>
                </ul>
                Pressing the corresponding target button a <em>second</em> time will <em>remove</em> the existing
                target.
                In case of slides, pressing a second time will insert an additional same directional slide instead
                which can then be removed by pressing a <em>third</em> time.
                </p>

                <figure class="NoteFigure">
                    <p>
                        <strong>Note:</strong> Targets <strong>mustn't</strong> be placed inside the first <span
                            class="TimeSigSpan"><sup class="TimeSigSup"><b>4</b></sup><br>
                            <sup class="TimeSigSup"><b>4</b></sub> </span> bar (indicated by a darkened background)
                        as it takes a Button the duration of <em>1 bar</em> to fly towards its Target.
                    </p>
                </figure>
            </div>
            <div class="ImageBlock">
                <video src="image/timeline/add_remove_demo.webm" autoplay muted loop></video>
            </div>

            <div class="TextBlock">
                <p>
                    <em>Range selections</em> can be made by pressing <code>Tab</code> to mark a <em>start point</em>,
                    moving the cursor and pressing <code>Tab</code> a second time to mark an <em>end point</em>.
                    Range selections are displayed as a white box with the same height as your cursor.
                    <br>
                    To insert a <em>Chain Slide</em>, first <em>range-select</em> a region,
                    hold down <code>Shift</code> and press the corresponding target slide key: <code>Q</code> /
                    <code>U</code> for left chain slides and <code>E</code> / <code>O</code> for right chain slides.
                    <br>
                    The default chain slide fragment interval is set to 1/32nd and can be changed through
                    the <code>Chain Slide Division</code> context menu options.
                    <br>
                    Holding down <code>Shift</code> and pressing a <em>non-slide</em> button key will fill in the
                    range-selection at the current grid division level with normal targets instead.
                </p>
            </div>
            <div class="ImageBlock">
                <video src="image/timeline/range_select_add_demo.webm" autoplay muted loop></video>
            </div>

            <div class="TextBlock">
                <p>
                    Targets can be selected by holding down <code>Right Mouse</code> and enclosing them with a
                    <em>selection box</em>.
                    Holding down <code>Shift</code> allows selecting <em>new targets</em> and holding down
                    <code>Alt</code> allows deselecting <em>old targets</em> without clearing the previous selection.
                </p>
                <p>
                    Selected targets can be moved left and right by mouse hovering over them, clicking
                    <code>Left Mouse</code> and dragging them <em>left and right</em>.
                    In the same way, holding down <code>Shift</code> <em>before</em> clicking <code>Left Mouse</code>
                    allows changing the type of selected targets by dragging them <em>up and down</em> instead.
                </p>

                <figure class="NoteFigure">
                    <p>
                        <strong>Note:</strong> Selected targets can <em>not</em> be moved past, nor be overlapped with
                        each other this way.
                        <br>
                        Sync target pairs also <em>cannot</em> be separated from each other
                        and can only be moved if <em>all</em> targets within a sync pair are selected.
                        <br>
                        To separate sync targets and or move targets past each other
                        the <code>Cut</code> and <code>Paste</code> commands can be used instead.
                    </p>
                </figure>
            </div>
            <div class="ImageBlock">
                <video src="image/timeline/select_move_demo.webm" autoplay muted loop></video>
            </div>

            <div class="TextBlock">
                <p>
                    <code>Right Mouse</code> clicking while not moving the mouse opens a context menu:
                </p>
                <ul>
                    <li><code>Grid Division</code> allows setting the current grid division.</li>
                    <li><code>Chain Slide Division</code> allows setting the chain slide division used to fill in the
                        range selection with chain slide fragments.</li>
                    <li><code>Playback Speed</code> allows changing the in-editor song playback speed.</li>
                    <li><code>Metronome Enabled</code> allows toggling the in-editor metronome on and off.</li>
                    <hr>
                    <li><code>Toggle Target Holds</code> allows toggling the Hold type for all selected targets.</li>
                    <li><code>Modify Targets</code> allows performing various target transformations.
                        <br>
                        <code>Modify Targets > Mirror Types</code> changes the type of every selected target
                        to its mirrored equivalent. This means:
                        <br>
                        <em>Triangle->Circle</em>, <em>Square->Cross</em>,
                        <em>Cross->Square</em>, <em>Circle->Triangle</em>,
                        <em>SlideL->SlideR</em> and <em>SlideR->SlideL</em>.

                        <br>
                        <code>Modify Targets > Expand Time</code> spaces every selected target
                        further apart from each other on the timeline.
                        <br>
                        <code>Modify Targets > Compress Time</code> spaces every selected target
                        close together on the timeline.
                    </li>
                    <hr>
                    <li><code>Cut</code>, <code>Copy</code> and <code>Paste</code> provide
                        cut, copy and paste functionality.
                    </li>
                    <li><code>Select All</code> and <code>Deselect</code> will either select or deselect
                        all targets in the entire chart.</li>
                    <li><code>Refine Selection</code> allows performing selection refinements
                        to the current target selection.
                        <br>
                        <code>Refine Selection > Select every Nth Target</code> refines the selection
                        based on an even interval, especially useful for quickly creating multi type target patterns.
                        <br>
                        <code>Refine Selection > Shift Selection Left / Right</code> shifts the selection
                        into the specified direction.
                        <br>
                        <code>Refine Selection > Select all Single Targets</code> refines the selection to only include
                        targets that don't share the same time point with any other target.
                        <br>
                        <code>Refine Selection > Select all Sync Targets</code> refines the selection to only include
                        targets that share the same time point with at least one other sync target.
                        <br>
                        <code>Refine Selection > Select all partially selected Sync Pairs</code> refines the selection
                        to also include every target in a sync pair if at least one target within is already selected.
                    </li>
                    <hr>
                    <li><code>Remove Targets</code> removes all selected targets from the chart.</li>
                </ul>
            </div>
            <div class="ImageBlock">
                <img src="image/timeline/context_menu.png">
            </div>
        </section>
        <hr>
        <section class="SubSection" id="positioning-targets">
            <header class="SectionHeader">
                <h3>Positioning Targets</h3>
            </header>
            <div class="TextBlock">
                <p>
                    The <em>Target Preview</em> window is the main method for editing and previewing
                    target positions, angles and other button path properties.
                    <br>
                    It has two modes of operation: the <code>Position Tool</code> and the <code>Path Tool</code>
                    which can be switched between by either pressing <code>1</code>, <code>2</code> or using their
                    respective context menu options.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/preview/context_menu_tools.png">
            </div>

            <div class="TextBlock">
                <p>
                    The Target Preview window displays all targets at the current timeline cursor position for as long
                    as they have been selected, not yet hit or have been hit more recently
                    than the <em>Post Hit Linger duration</em>.
                    <br>
                    Similarly to the Target Timeline, targets can be box-selected
                    by holding down <code>Right Mouse</code> and enclosing them with a selection box.
                    <code>Shift</code> and <code>Alt</code> likewise allow addition and exclusion from the existing
                    selection.
                    <br>
                    For navigation <code>Q</code> and <code>E</code> can be used to jump the timeline cursor
                    to the next closest or previous target.
                </p>
            </div>
            <div class="ImageBlock">
                <video src="image/preview/mouse_selection_demo.webm" autoplay muted loop></video>
            </div>
            <hr>

            <div class="TextBlock">
                <p>
                    The <code>Position Tool</code>, indicated by distance marker circles rendered around all selected
                    targets, allows manipulation of <em>target positions</em>.
                    <br>
                    Clicking <code>Left Mouse</code> while hovering over a selected target allows the target selection
                    to be moved with the mouse. Holding down <code>Shift</code> while doing so snaps their positions to
                    the grid and holding down <code>Alt</code> increases the move precision.
                </p>
            </div>
            <div class="ImageBlock">
                <video src="image/preview/mouse_grab_demo.webm" autoplay muted loop></video>
            </div>

            <div class="TextBlock">
                <p>
                    Clicking <code>Left Mouse</code> while <em>not</em> hovering any selected target
                    will open a <em>Row Position Circle</em> instead.
                    Moving the mouse cursor in a direction relative to the mouse-down start position then positions all
                    selected targets in a matching row formation.
                    <br>
                    Holding <code>Shift</code> increases the diagonal row steepness and pressing <code>Alt</code>
                    <em>before</em> clicking <code>Left Mouse</code> allows positioning the target row
                    <em>backwards</em>. Backwards row placement is especially useful for fitting targets around
                    existing sync target formations.
                    <br>
                    Pressing <code>W, A, S, D</code> or <code>Up, Left, Down, Right</code> moves all selected targets by
                    one step in the corresponding direction.
                </p>
            </div>
            <div class="ImageBlock">
                <video src="image/preview/mouse_row_demo.webm" autoplay muted loop></video>
            </div>
            <hr>

            <div class="TextBlock">
                <p>
                    The <code>Path Tool</code>, indicated by button path curves rendered on top of selected targets,
                    allows manipulation of the target button path properties <em>angle</em> and <em>frequency</em>.
                    <br>
                    Clicking <code>Left Mouse</code> anywhere in the window allows setting the angles of all selected
                    targets equal to the angle between the mouse cursor and the <em>first</em> selected target.
                    Pressing <code>Alt</code> <em>before</em> clicking <code>Left Mouse</code> sets the angle between
                    the mouse cursor and <em>last</em> selected target instead.
                    If the button spawn position doesn't start off-screen then the angle arrow will be shown in gray.
                    <br>
                    <code>Mouse Wheel</code> scrolling up and down increments or decrements the angle to all selected
                    targets by a uniform amount.
                    <br>
                    Clicking <code>Middle Mouse</code> while not setting an angle displays the selected target angles as
                    a numeric value and renders the target button paths as straight lines.
                </p>
                <p>
                    Holding down <code>Shift</code> or <code>Alt</code> for any of these actions
                    can be used to refine the step / snap precision to be rougher or more precise.
                </p>
            </div>
            <div class="ImageBlock">
                <video src="image/preview/mouse_angle_demo.webm" autoplay muted loop></video>
            </div>
            <hr>

            <div class="TextBlock">
                <p>
                    <code>Right Mouse</code> clicking while not moving the mouse opens a context menu
                    with different options depending on the current tool selection:
                </p>
                <p>
                    <strong>Position Tool</strong> specific:
                </p>
                <ul>
                    <li><code>Flip Targets Horizontally</code></li>
                    <li><code>Flip Targets Horizontally (Local)</code></li>
                    <li><code>Flip Targets Vertically</code></li>
                    <li><code>Flip Targets Vertically (Local)</code>
                        <br>
                        flips the position, angle and frequency of all selected targets horizontally or vertically.
                        The local variants flip around the center of all selected targets,
                        otherwise the screen center is used instead.
                    </li>
                    <hr>

                    <li><code>Diagonal Mouse Row Spacing</code>
                        <br>
                        allows selecting the current row spacing used while <code>Left Mouse</code> row positioning
                        targets from a predefined list.
                        <br>
                        <!-- TODO: Don't forget to update this once it's ready -->
                        At the moment theses can not be configured inside the program itself
                        but are planned to be in a future update.
                    </li>

                    <li><code>Position in Row</code></li>
                    <li><code>Position in Row (Back)</code>
                        <br>
                        positions all selected targets in a row starting from the
                        <em>first</em> selected target towards the direction of the <em>last</em> selected target,
                        spaced apart based on each target's correct beat timing.
                        The backwards variant starts from the <em>last</em> selected target
                        going towards the <em>first</em> instead.
                        <br>
                        Conventionally diagonal target rows are spaced with a non uniform x/y distance
                        as is the case for the standard mouse row spacing for example which uses a ratio of
                        <code>5:3</code>.
                        <br>
                        This makes this option very situational as its <code>1:1</code> ratio may lead to undesired
                        spacing and subpixel positions depending on the input angle used.
                    </li>
                    <hr>

                    <li><code>Interpolate Positions Linear</code></li>
                    <li><code>Interpolate Positions Circular</code></li>
                    <li><code>Interpolate Positions Circular (Flip)</code>
                        <br>
                        interpolates the positions of all selected targets
                        starting at the <em>first</em> selected target up to and including the <em>last</em> selected
                        target, <em>regardless</em> of each target's beat timing.
                        The circular variants form a half circle and the linear option a straight line.
                    </li>
                    <hr>

                    <li><code>Stack Targets</code>
                        <br>
                        sets the position of every selected target to the same as the first,
                        positioning them stacked on top of each other.
                    </li>

                    <li><code>Snap Positions To</code>
                        <br>
                        rounds the position of every selected target to that of the chosen value.
                    </li>
                </ul>
                <hr>

                <p>
                    <strong>Path Tool</strong> specific:
                </p>
                <ul>
                    <li><code>Invert Target Frequencies</code>
                        <br>
                        sets the frequency of all selected targets to negative
                        itself effectively flipping the path of the button.
                        <br>
                        This option is crucial for quickly matching a target's button path curve
                        to that of its target row direction and should be used extensively.
                    </li>
                    <hr>

                    <li><code>Interpolate Angles Clockwise</code></li>
                    <li><code>Interpolate Angles Counterclockwise</code></li>
                    <li><code>Interpolate Distances</code>
                        <br>
                        linearly interpolates the angles or distances of all selected targets
                        starting at the <em>first</em> selected up to and including the <em>last</em> selected target.
                    </li>
                    <hr>

                    <li><code>Angle Increment Settings</code>
                        <br>
                        allows configuring the angle increment settings
                        used by the <code>Apply Angle Increment</code> options.
                        <br>
                        <code>Angle Increment Settings > Fixed Step Increment</code>
                        <br>
                        causes the beat distance to be
                        ignored from one target to another. This option is generally not recommended.
                        <br>
                        <code>Angle Increment Settings > Apply to Chain Slide Fragments</code>
                        <br>
                        increments angles with
                        each chain slide fragment instead of only the starting piece. This option is generally not
                        recommended.
                        <br>
                        The <code>Per Beat</code>, <code>Per Beat (Diagonal)</code> and <code>Per Target</code>
                        options control the degree angle to be applied from one target to the next.
                        The Diagonal increment is used if a target is placed at an intercardinal angle
                        relative to the last.
                        <br>
                        The <code>Set Default</code> and <code>Set Default Small</code> button allow quickly switching
                        between the settings for the two most common used configurations.
                    </li>
                    <li><code>Apply Angle Increment Positive</code></li>
                    <li><code>Apply Angle Increment Positive (Back)</code></li>
                    <li><code>Apply Angle Increment Negative</code></li>
                    <li><code>Apply Angle Increment Negative (Back)</code>
                        <br>
                        increment or decrement the angles from from one selected target to the next
                        depending on the current <code>Angle Increment Settings</code>.
                        The backwards variants start from the last selected target going towards the first instead.
                    </li>
                </ul>
            </div>
            <div class="ImageBlock">
                <img src="image/preview/context_menu_combined.png">
            </div>
            <hr>
            <div class="TextBlock">
                <p>
                    Another way of setting target properties is through the <em>Target Inspector</em> window.
                    Modifications here are always applied to all selected targets simultaneously.
                </p>
                <p>
                    Labels can be <code>Left Mouse</code> click dragged left and right
                    to apply a <strong>uniform increment</strong> to the property for all selected targets.
                    Holding <code>Shift</code> / <code>Alt</code> allows for more rough / precise drag control.
                    <br>
                    Entering a <em>numeric value</em> into one of the text input fields applies the
                    <strong>same</strong> value to the property for all selected targets.
                </p>
                <p>
                    Currently (exact values for) the frequency, amplitude and distance properties can only be
                    edited through the Target Inspector.
                    The <code>Amplitude</code> and <code>Distance</code> property input field widgets also function as
                    combo boxes from where a list of common values can be selected.
                    These combo boxes can either be expanded by clicking on the arrow button on the right
                    or <code>Right Mouse</code> clicking anywhere inside the input field.
                    <!-- TODO: Mention whenever something can be configured in the settings (?) -->
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/inspector/selection_example.png">
            </div>
            <div class="TextBlock">
                <p>
                    Until a property has been edited by the user, targets have the <code>Use Preset</code> flag enabled.
                    Targets with this flag set automatically follow a predefined position path and react dynamically to
                    being moved or edited on the Target Timeline.
                    <br>
                    If the <code>Use Preset</code> flag is manually re-enabled for a target it will automatically revert
                    back to its predefined path.
                    <br>
                    Resetting the placement for an entire chart can for example be done
                    quickly by selecting all targets and setting this property to <code>True</code>.
                </p>
            </div>
            <div class="ImageBlock">
                <video src="image/inspector/use_preset_demo.webm" autoplay muted loop></video>
            </div>
            <hr>

            <div class="TextBlock">
                <p>
                    Multiple targets placed at the same time point, so called "Sync Targets", conventionally use
                    specific placement and path formations which can be quickly formed
                    through the <em>Sync Target Presets</em> window.
                    <br>
                    Comfy Studio differentiates between two type of sync presets:
                    <em>Dynamic presets</em> and <em>Static presets</em>.
                    <br>
                    <em>Dynamic</em> sync presets are represented as the 6 button at the top of the window
                    and <em>dynamically</em> react and adjust with varying behavior according to the target selection.
                    <br>
                    <em>Static</em> sync presets on the other hand are predefined fixed list of properties that can be
                    applied to a sync target pair without variations.
                </p>
                <p>
                    At the moment these static sync presets <strong>can not yet be configured</strong>
                    inside the program itself and the <code>Add New...</code> button serves as a placeholder.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/presets/sync_window_example.png">
            </div>

            <div class="TextBlock">
                <p>
                    The sync preset button are enabled once a target selection has been made.
                    Mouse hovering a preset button previews its behavior in the <em>Target Preview</em> window.
                    Pressing a preset button then applies its preset to all selected sync target pairs.
                    Sync presets can be applied to <em>multiple different</em> sync target pairs with a single click
                    however only <em>the first</em> valid pair is previewed inside the Target Preview window.
                </p>
                <p>
                    The <em>dynamic</em> sync presets operate on the concept of a single <em>master target</em> that
                    dictates the layout of the other targets within its sync pair.
                    The <em>master target</em> is chosen by it either being the <em>only</em>
                    target selected within its sync pair or in case of multiple pair selected targets, the target with
                    the <em>highest type priority</em>. Targets in the <em>last row</em> of the
                    Target Timeline, are prioritized <em>first</em>.
                </p>
            </div>
            <div class="TextBlock">
                <p>
                    The supported <em>dynamic</em> sync presets are:
                </p>
            </div>

            <div class="TextBlock">
                <p>
                    <strong>Vertical Left / Right:</strong>
                    <br>
                    Operates on fixed per-type target Y position spacing, stacked vertically on top of each other.
                    Applicable to sync target pairs of any non-slide type and number combination.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/presets/sync_dynamic_vertical_demo.png">
                <hr>
            </div>

            <div class="TextBlock">
                <p>
                    <strong>Horizontal Up / Down:</strong>
                    <br>
                    Operates on a fixed X position for each target depending on its type.
                    Applicable to sync target pairs of any type and number combination.
                    <br>
                    When used with sync slide target pairs their resulting preset layout depends
                    based on which of the 4 vertically split sections of the screen
                    the <em>master slide target</em> is positioned in.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/presets/sync_dynamic_horizontal_demo.png">
                <hr>
            </div>

            <div class="TextBlock">
                <p>
                    <strong>Square:</strong>
                    <br>
                    Operates on a uniform distance for each target to the corresponding screen corner.
                    Applicable to quad non-slide type sync target pairs.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/presets/sync_dynamic_square_demo.png">
                <hr>
            </div>

            <div class="TextBlock">
                <p>
                    <strong>Triangle:</strong>
                    <br>
                    Operates on fixed X position for each target depending on its type and a uniform height distance to
                    the corresponding screen edge.
                    Applicable to Triangle+Square+Cross and Square+Cross+Circle sync target pairs.
                    Can be flipped by moving the master target to either the top or bottom of the screen.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/presets/sync_dynamic_triangle_demo.png">
                <hr>
            </div>

            <div class="TextBlock">
                <p>
                    The settings button at the bottom right of the window allows further configuration of the dynamic
                    sync preset behavior.
                    This menu can also be opened by <code>Right Mouse</code> clicking inside the window and while open
                    can be configured by pressing the <code>1</code>, <code>2</code>, <code>3</code> and
                    <code>4</code> keys.
                <ul>
                    <li><code>Steep Angles</code>
                        use steeper 35.0&deg; instead of 45.0&deg; angles for the vertical and 10.0&deg; instead of
                        20&deg;
                        angles for horizontal presets.</li>
                    <li><code>Same Directional Angles</code> set all angles of the vertical or horizontal presets to the
                        same direction, depending on the master target.</li>
                    <li><code>Inside Out Angles</code> flip the angles of the square preset by 180.0&deg;, turning them
                        inside out.</li>
                    <li><code>Elevate Bottom Row</code> raise the position of the bottom row targets for the square and
                        triangle presets.</li>
                </ul>
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/presets/sync_window_context_menu_dynamic_settings.png">
            </div>
            <hr>

            <div class="TextBlock">
                <p>
                    In addition, "Sequence Presets" are presets that form shapes, curves or paths
                    that span across multiple <em>different targets</em> over a <em>period of time</em>
                    and are available through the <em>Sequence Target Presets</em> window.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/presets/sequence_window_example.png">
            </div>

            <div class="TextBlock">
                <p>
                    Sequence presets are applied and previewed the same way
                    as by the <em>Sync Target Presets</em> window.
                    <br>
                    This feature is <strong>still in development</strong>
                    and only clockwise / counterclockwise circle presets are available at the moment.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/presets/sequence_medium_circle_ccw_demo.png">
            </div>

        </section>
        <hr>
        <section class="SubSection" id="playtesting-chart">
            <header class="SectionHeader">
                <h3>Playtesting</h3>
            </header>


            <div class="TextBlock">
                <p>
                    Charts can be playtested at any time by clicking the <code>Playtest > Start from Beginning</code> /
                    <code>Playtest > Start from Cursor</code> menu option or pressing <code>F5</code> / <code>F6</code>.
                    <br>
                    The <code>Playtest > Autoplay Enabled</code> menu option allows enabling or disabling
                    the <em>Autoplay</em> mode before leaving the editor.
                </p>
                <p>
                    During playtest mode targets can be hit by pressing
                    <code>W, A, S, D</code>, <code>I, J, K, L</code> for normal targets and
                    <code>Q, E</code> or <code>U, O</code> for slide and chain slide targets.
                    <br>
                    Standard DualShock4 controller input is natively supported and
                    macros as well as other DirectInput compatible controllers
                    can be configured through the Settings window.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/other/playtest_example_chart.png">
            </div>

            <div class="TextBlock">
                <p>
                    <code>Right Mouse</code> click can be used to open a context menu.
                    Pressing <code>Space</code>, <code>DS4 Options</code>, or clicking the <code>Pause / Resume</code>
                    context menu options toggles playback.
                    <br>
                    Pressing <code>Enter</code>, <code>DS4 R3</code> or clicking the
                    <code>Restart from Reset Point</code>
                    context menu option restarts the playback mode from the last set reset point.
                    <br>
                    Pressing <code>Tab</code> / <code>Shift+Tab</code>, <code>DS4 Touch</code> / <code>DS4 L3</code>
                    or clicking the <code>Move Reset Point Forward</code> / <code>Move Reset Point Backward</code>
                    context menu options
                    moves the restart point back by 10 seconds / moves the restart point forward to the current playback
                    time.
                    <br>
                    Pressing <code>F1</code> or clicking the <code>Autoplay Enabled</code> context menu option
                    toggles the autoplay mode.
                    During autoplay manual input is disabled and an "AUTOPLAY" label is displayed.
                    <br>
                    Pressing <code>Esc</code> or clicking the <code>Return to Editor (Current)</code> context menu
                    option exits out of playtest mode and returns to the editor, at the time current playtest time.
                    <br>
                    Pressing <code>Shift+Esc</code> or clicking the <code>Return to Editor (Pre Playtest)</code>
                    context menu option exits out of playtest mode and returns to the editor,
                    at the time <em>prior</em> to entering playtest mode.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/other/playtest_context_menu.png">
            </div>


        </section>
        <hr>
        <section class="SubSection" id="export-chart">
            <header class="SectionHeader">
                <h3>Exporting Charts</h3>
            </header>

            <div class="TextBlock">
                <p>
                    Once a chart is completed it can be exported as a <code>.dsc</code> PV Script to be used in-game
                    through either the <code>File > Export > Export PV Script Chart...</code> menu option
                    (to export a single chart file without any additional data)
                    or through <code>File > Export > Export PV Script MData...</code>
                    (to export a complete MData folder together with all associated files required to be playable).
                </p>
                <p>
                    At the moment only the <em>Arcade</em> export target format is supported
                    and only a single chart can be exported at a time.
                    If the <em>Output MData ID</em> folder <strong>already exists</strong>
                    then it will be <strong>overwritten</strong>.
                    <br>
                    Advanced auto-merge compatibility options are planned for the future
                    but to export multiple charts at this time requires exporting each chart as its own MData folder
                    with an incrementing MData ID while always merging with the last.
                </p>
                <p>
                    If enabled the <code>Dummy Movie Reference</code> option adds a <code>pv_db.txt</code> movie file
                    reference with a name matching that of the output chart + <code>.mp4</code>
                    as well as <code>.dsc</code> movie play commands at the same time as the music starts.
                </p>
                <p>
                    If the chart audio source file isn't already an Ogg Vorbis file
                    then the <code>Ogg Vorbis VBR Quality</code> slider can be used to
                    control the quality level of the automatically converted output audio file
                    (internally encoded using libvorbis).
                    <br>
                    The slider ranges from q1.0 (lowest quality, smallest file) to q10.0 (highest quality, largest
                    file).
                    Quality mode 4.0 for example at 44kHz stereo equates to roughly 128kbps VBR.
                    <br>
                    Like is the case with all lossy format conversions in order to preserve quality it is if possible
                    always recommended to encode from a lossless audio source such as FLAC.
                    <br>
                    If more control over the audio conversion is desired
                    then it is recommended to externally convert the audio file first
                    and linking it as the chart's audio source.
                    Doing so also means that the audio file doesn't need to be re-encoded on every export
                    which naturally speeds up the export process.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/other/export_pv_script_mdata.png">
            </div>
        </section>
        <hr>
        <section class="SubSection" id="settings-window">
            <header class="SectionHeader">
                <h3>Settings Window</h3>
            </header>

            <div class="TextBlock">
                <p>
                    The Settings window can be opened through the <code>Edit > Settings...</code> menu option
                    or by pressing <code>Ctrl+,</code>.
                    <br>
                    Comfy Studio comes preconfigured with 1st and 2nd Gen DualShock4 controller support.
                    Other DirectInput compatible controllers can also be used
                    but must first have their physical button layout configured by the user
                    via the <code>Controller Layout</code> tab to match that of a standard controller.
                    <br>
                    Once a layout mapping has been defined for a controller it can be used to assign input bindings
                    in the <code>Editor Bindings</code> and <code>Playtest Bindings</code> tabs.
                </p>
                <p>
                    <!-- TODO: Explain all options... although probably inside the program itself via tooltips or a description box -->
                    More detailed explanations and additional options will be coming in the future.
                </p>
            </div>
            <div class="ImageBlock">
                <img src="image/other/settings_window_general.png">
            </div>
        </section>
        <hr>

        <!-- TODO: Include section -->
        <!-- <section class="SubSection" id="terminology-concepts">
            <header class="SectionHeader">
                <h3>Terminology and Concepts</h3>
            </header>
            <div class="TextBlock">
                <p>
                    <em>Currently under construction. Please come back later.</em>

                    TODO: To include and more
                    Target / Button (not note), Sync Targets (not multi), Slide / Chain Slide (not slider),
                    Position, Angle, Frequency, Amplitude, Distance, Flying Time = one 4/4 bar, apparent button speed,
                    ...
                </p>
            </div>
        </section>
        <hr> -->

        <!-- TODO: Include section -->
        <!-- <section class="SubSection" id="chart-style-guide">
            <header class="SectionHeader">
                <h3>Charting Style Guide</h3>
            </header>
            <div class="TextBlock">
                <p>
                    <em>Currently under construction. Please come back later.</em>

                    TODO: To include and more
                    Target beat timing and their placement distance relationship,
                    how to position targets, how to angle targets, when and how to use target frequency,
                    conventional sync target formations,
                    know when to break the rules,
                    target types should be set during positioning not before else combining sync formation can become impossible,
                    targets should line up nicely on the bar lines whenever possible,
                    ...
                </p>
            </div>
        </section>
        <hr> -->

        <footer class="CopyrightFooter">
            <p><em>Copyright &copy; 2021 Samyuu</em></p>
            <a href="https://github.com/samyuu">
                <img class="SamyuuPeepo" src="image/samyuu_peepo.png">
            </a>
        </footer>
    </div>

</body>

</html>